<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Routes</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="wrap">
    <h1>Routes</h1>
    <div class="menu">
      {% for rid, route in routes.items() %}
        <a class="menu-item" href="{{ url_for('view_route', route_id=rid) }}">{{ route.title }}</a>
      {% endfor %}
    </div>

    <div style="margin-top:18px;">
      <button id="create-new" class="btn">Add New Route</button>
    </div>
  </div>

  <script>
    document.getElementById("create-new").onclick = async () => {
      const title = prompt("New route title:");
      if (!title) return;
      const resp = await fetch("/api/route", {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({title: title, stops: []})
      });
      const data = await resp.json();
      if (data && data.id) {
        location.href = "/route/" + data.id;
      } else {
        alert("Failed to create route");
      }
    };
  </script>
</body>
</html>
